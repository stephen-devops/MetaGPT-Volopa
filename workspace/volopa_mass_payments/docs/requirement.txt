
Build the Volopa Mass Payments API System for uploading CSV files with up to 10,000 payment instructions.

## Core Requirements

### File Upload & Management
1. CSV upload with drag-and-drop interface
2. Download recipient template with latest recipient details per currency
3. Download blank CSV template for payments
4. View uploaded file status (pending, validating, validated, failed, approved)
5. View file summary (total records, valid records, failed records)

### Validation
1. Validate file format and structure
2. Validate data integrity (required fields, data types, business rules)
3. Display validation errors with row-level detail
4. Check settlement methods for each recipient

### Approval Workflow
1. Currency-specific approval requirements (some currencies require approval)
2. Notify designated approvers (bell icon notification)
3. First-approver-wins pattern (only one approval needed)
4. Redirect first approver to create payments
5. Redirect subsequent approvers to draft payments page

### Payment Processing
1. Create payment instructions from validated CSV data
2. Support multiple currencies (INR requires invoice_number field)
3. Associate payments with recipients/beneficiaries
4. Retrieve payment purpose codes by country and currency

### Data Retrieval
1. Get all beneficiaries filtered by currency
2. Get beneficiaries associated with a specific file
3. Get all uploaded files for a client
4. Get draft files awaiting approval

## Technical Requirements

### Laravel Architecture
- Laravel 10+ with PHP 8.2+
- RESTful API under /api/v1 prefix
- OAuth2 and WSSE authentication support
- JSON responses with proper status codes
- API Resources for response transformation
- Queue-based async processing for large files

### Data Volume
- Support up to 10,000 payment rows per CSV file
- Efficient batch processing without timeouts
- Proper indexing for query performance

### Quality Standards
- Follow DOS/DONTS patterns (see dos_and_donts.pdf)
- Thin controllers with service layer
- FormRequest validation with policies
- Database transactions for multi-write operations
- Feature tests for all endpoints
- No N+1 queries (use eager loading)

## Success Criteria
- API endpoints are versioned, authenticated, and throttled
- File validation completes within 30 seconds for 10,000 rows
- Approval workflow prevents duplicate processing
- All responses use consistent JSON structure
- Code passes all feature tests
